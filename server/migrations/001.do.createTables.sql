DROP TABLE IF EXISTS users;

CREATE TABLE IF NOT EXISTS users (

    user_id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,

    user_name TEXT NOT NULL,

    user_pw TEXT NOT NULL

);


DROP TABLE IF EXISTS folders;

CREATE TABLE IF NOT EXISTS folders (

    folder_id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,

    folder_name TEXT NOT NULL,

    users INTEGER REFERENCES users(user_id) ON DELETE CASCADE NOT NULL

);
 

DROP TABLE IF EXISTS notes;

CREATE TABLE IF NOT EXISTS notes (

    note_id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,

    note_name TEXT NOT NULL,

    note_text TEXT NOT NULL,

    folders INTEGER REFERENCES folders(folder_id) ON DELETE CASCADE NOT NULL

);


DROP TABLE IF EXISTS sessions;

CREATE TABLE IF NOT EXISTS sessions (

    auth_token TEXT NOT NULL,

    users INTEGER REFERENCES users(user_id) ON DELETE CASCADE NOT NULL UNIQUE

);
